# M10.5 CI Run Analysis — Run 1 (GREEN)

**Milestone:** M10.5 — Demo Deployment Layer  
**Branch:** `m10.5-demo-deploy`  
**PR:** #13  
**Run ID (CI):** 22246235093  
**Run ID (Deploy):** 22246235084  
**Status:** ✅ **GREEN**

---

## Executive Summary

M10.5 CI passed on the second push (first was a checksum mismatch due to CRLF/LF line endings). After fixing line endings with `.gitattributes`, all checks pass.

---

## CI Workflow Results

| Job | Status | Duration | Notes |
|-----|--------|----------|-------|
| Backend (Python 3.10) | ✅ PASS | ~1.5min | 232 tests |
| Backend (Python 3.11) | ✅ PASS | ~1.5min | 232 tests |
| Backend (Python 3.12) | ✅ PASS | ~1.5min | 232 tests |
| Frontend | ✅ PASS | ~40s | 95 tests |
| E2E Tests | ✅ PASS | ~1min | 9 tests |
| CI Success | ✅ PASS | ~2s | All checks passed |

---

## Deploy Workflow Results

| Job | Status | Notes |
|-----|--------|-------|
| Check CI Status | ✅ PASS | should_deploy=true |
| Check Deploy Secrets | ✅ PASS | Netlify configured, Render not configured |
| Build Frontend | ✅ PASS | Build artifact uploaded |
| Deploy Preview (Netlify) | ✅ PASS | Preview deployed |
| Deploy Production | ⏭️ SKIP | PR event, not main push |
| Post-Deploy Health Check | ⏭️ SKIP | Production only |
| Deploy Summary | ✅ PASS | Summary generated |

---

## Test Count Summary

### Backend (33 new tests in M10.5)

| Module | Tests |
|--------|-------|
| test_demo_router.py | 33 |

**Total Backend Tests:** 232 (199 from M10 + 33 new)

### Frontend (18 new tests in M10.5)

| Module | Tests |
|--------|-------|
| DemoBanner.test.tsx | 10 |
| api.test.ts | 8 |

**Total Frontend Tests:** 95 (77 from M10 + 18 new)

### E2E (4 new tests in M10.5)

| Spec | Tests |
|------|-------|
| demo.spec.ts | 4 |

**Total E2E Tests:** 9 (5 from M10 + 4 new)

---

## Coverage

Backend coverage maintained at >85% threshold (required by CI).

---

## Issues Encountered & Fixed

### Issue 1: Checksum Mismatch (Run 1 - FAILED)

**Error:** `AssertionError: Integrity check failed: {'manifest.json': False, ...}`

**Root Cause:** JSON files created on Windows had CRLF line endings, but Linux CI computed checksums on LF files.

**Fix:**
1. Added `.gitattributes` with `demo_artifacts/**/*.json text eol=lf`
2. Regenerated checksums using LF-normalized files
3. Force-pushed to PR branch

**Result:** Run 2 passed.

---

## Files Changed

| Category | Files | Lines |
|----------|-------|-------|
| Backend | demo_router.py, main.py | +400 |
| Backend Tests | test_demo_router.py | +400 |
| Frontend | api.ts, DemoBanner.tsx/.css, App.tsx | +100 |
| Frontend Tests | DemoBanner.test.tsx, api.test.ts | +150 |
| E2E Tests | demo.spec.ts | +50 |
| Demo Artifacts | case_001/*.json | +150 |
| CI/CD | deploy.yml | +250 |
| Config | .gitattributes | +1 |
| Docs | M10_5_plan.md, M10_5_toolcalls.md | +350 |

**Total:** +1,851 lines

---

## Verification Checklist

- [x] All CI jobs pass
- [x] Deploy workflow functional
- [x] Netlify preview deployed
- [x] Demo artifacts serve correctly
- [x] Checksums verify on Linux
- [x] No new dependencies added
- [x] AST guardrails pass (no R2L/subprocess imports)
- [x] Path traversal protection tested
- [x] CORS configuration functional

---

## Netlify Preview URL

Preview deployed at: https://deploy-preview-13--majestic-dodol-25e71c.netlify.app

---

## Next Steps

1. Await merge permission
2. Generate M10_5_audit.md
3. Generate M10_5_summary.md
4. Update clarity.md
5. Tag v0.0.11.5-m10.5 (if using sub-milestone tags)

---

*Analysis generated: 2026-02-21*

